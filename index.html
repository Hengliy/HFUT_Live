<html>
	<head>
		<meta charset="utf-8">
		<title>校内直播平台 By Netcan</title>
		<link rel="stylesheet" href="node_modules/semantic-ui/dist/semantic.min.css" type="text/css" media="all" />
	</head>
	<body>

		<div class="ui white massive main menu">
			<div class="ui container">
				<a href="/" class="header item">
					HFUT直播平台
				</a>
				<div class="right menu">
					<a class="item" id="#onlineCnt">
						大厅在线人数：开发中...
					</a>
				</div>
			</div>
		</div>

		<div class="ui container">
			<div class="ui raised segment">
				<p>平台正在开发中，敬请期待！大厅每5s自动刷新一下，无需手动刷新！
				<p>TODO
				<ul>
					<li>打赏</li>
					<li>在线人数</li>
					<li>弹幕</li>
					<li>点播</li>
				</ul>
			</div>
			<div id="room" class ="ui four column grid">
			</div>
		</div>

		<script src="node_modules/jquery/dist/jquery.min.js"></script>
		<script src="node_modules/semantic-ui/dist/semantic.min.js"></script>

		<script>
			var api = "api.php";
			function getRoom() {
				$.ajax({
					url: api + "?getRoom",
					type: "GET",
					dataType: "json",
					success: function(a) {
						var content = "";
						for(var i = 0; i < a.length; ++i)
							content += "<div class='column'>"
								+ "<div class='ui card'>" +
								"<a class='fluid image' href='player.html?room="+ a[i] + "'>"+
								"<img class='fluid image' src='live/"+ a[i] + ".jpg'  title='"+ a[i] +"'>" +
								"</a>" +
								'<div class="content">' +
								'<a class="header" href=player.html?room=' + a[i] + '>'+ a[i] +'</a>' +
								'</div>' +
								"</div>" +
								"</div>";

						$('#room').html(content);
						// console.log(content);
					}
				});
			}
			getRoom();
			setInterval(getRoom, 5000);
		</script>
	</body>

</html>
